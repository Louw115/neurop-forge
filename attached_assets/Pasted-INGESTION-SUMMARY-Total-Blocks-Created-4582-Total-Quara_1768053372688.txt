INGESTION SUMMARY:
  Total Blocks Created: 4582
  Total Quarantined: 80
  Total Errors: 526

STEP 3: Library Statistics
--------------------------------------------------
Total Blocks in Library: 4552
Categories: {'arithmetic': 829, 'string': 960, 'transformation': 333, 'validation': 842, 'collection': 786, 'filtering': 529, 'aggregation': 107, 'comparison': 44, 'sorting': 33, 'searching': 46, 'utility': 43}
Average Trust Score: 0.36

STEP 4: Sample Queries Across Domains
--------------------------------------------------

Query: 'string manipulation trim uppercase' (String Operations)
  Found: 5 blocks
    - validate_ipv6: Validate IPv6 address (simplified)....
    - count_occurrences: Count the number of occurrences of a sub...
    - split_slug: Split slug into parts....

Query: 'list flatten unique sort' (Collection Operations)
  Found: 5 blocks
    - is_worker_idle: Check if a worker has been idle too long...
    - is_safe_extension: Check if a file extension is generally s...
    - is_audio_extension: Check if an extension represents an audi...

Query: 'validate email url phone' (Validation)
  Found: 5 blocks
    - is_valid_base_string: Check if string is valid for given base....
    - validate_ipv6: Validate IPv6 address (simplified)....
    - is_valid_error_code: Check if error code is valid....

Query: 'convert integer float string' (Type Conversion)
  Found: 5 blocks
    - to_list: Convert a value to a list....
    - count_occurrences: Count the number of occurrences of a sub...
    - split_slug: Split slug into parts....

Query: 'compare equals greater less clamp' (Comparison Logic)
  Found: 5 blocks
    - compare_slugs: Compare two slugs for equality (case-ins...
    - is_equal: Check if versions are equal....
    - filter_ready_scheduled_messages: Filter scheduled messages that are ready...

Query: 'date days between weekend leap year' (Date/Time)
  Found: 5 blocks
    - validate_ipv6: Validate IPv6 address (simplified)....
    - validate_form: Validate entire form....
    - is_dirty: Check if a model has any changed fields....

STEP 5: SEMANTIC COMPOSITION - The Key Innovation
--------------------------------------------------
Query: 'validate and format user input'

A) OLD APPROACH (Keyword Matching):
   Would match blocks containing 'validate', 'format', 'user', 'input'
   Problem: Returns irrelevant blocks like 'is_light_color' or 'format_bytes'

   Keyword-matched blocks: 10
     - is_valid_base_string
     - add_trace_id
     - validate_ipv6

B) NEW APPROACH (Semantic Intent Matching):
   Matches by DOMAIN: validation -> formatting
   Matches by TYPE FLOW: input types -> output types
   Orders by OPERATION: validate first, then format

RESULT: Semantic Block Graph
--------------------------------------------------
Graph Valid: True
Composition Confidence: 100.00%
Total Trust Score: 0.38
Number of Nodes: 6

Intent Analysis:
  Required Domains: SemanticDomain.VALIDATION, SemanticDomain.FORMATTING
  Flow Direction: validate_then_format

Blocks in Semantic Graph (ordered by operation semantics):
  [0] is_valid_base_string
      Domain: validation | Operation: check
      Why Selected: Matches domain: validation
  [1] is_ip_in_range
      Domain: validation | Operation: check
      Why Selected: Matches domain: validation
  [2] is_worker_idle
      Domain: validation | Operation: check
      Why Selected: Matches domain: validation
  [3] format_bytes
      Domain: formatting | Operation: format
      Why Selected: Matches domain: formatting
  [4] format_test_result
      Domain: formatting | Operation: format
      Why Selected: Matches domain: formatting
  [5] format_uptime
      Domain: formatting | Operation: format
      Why Selected: Matches domain: formatting

STEP 5b: Semantic Index Statistics
--------------------------------------------------
Total Semantically Indexed: 4552 blocks

Blocks by Semantic Domain:
  string: 954 blocks
  validation: 842 blocks
  collection: 611 blocks
  filtering: 552 blocks
  calculation: 442 blocks
  transformation: 355 blocks
  io: 261 blocks
  utility: 150 blocks
  aggregation: 95 blocks
  comparison: 55 blocks

STEP 6: Library Breakdown by Category
--------------------------------------------------
  String: 50 blocks
  List: 50 blocks
  Validation: 50 blocks
  Conversion: 50 blocks
  Comparison: 50 blocks
  Logic: 50 blocks
  Date: 50 blocks
  Time: 50 blocks

======================================================================
LIBRARY INGESTION COMPLETE
======================================================================

SUMMARY:
  - 175 source modules ingested
  - 4582 blocks created
  - 0.36 average trust score

CAPABILITIES NOW AVAILABLE:
  - String manipulation (trim, split, join, replace, etc.)
  - Collection operations (flatten, unique, sort, chunk, etc.)
  - Data validation (email, URL, phone, patterns, etc.)
  - Type conversions (int, float, string, boolean, etc.)
  - Comparison logic (equals, between, clamp, coalesce, etc.)
  - Date/time utilities (days between, leap year, format, etc.)
  - Math & statistics (sqrt, median, variance, trig, etc.)
  - Path utilities (join path, get extension, is_image, etc.)
  - Data parsing (JSON, CSV, key-value, nested dict, etc.)
  - Encoding & hashing (MD5, SHA256, base64, URL encode, etc.)
  - URL utilities (parse URL, query strings, domains, etc.)
  - Text analysis (word count, reading time, lexical diversity)
  - Color utilities (hex to RGB, blend, brightness, etc.)
  - Formatting (currency, bytes, duration, ordinals, etc.)
  - Array operations (matrix multiply, transpose, vectors, etc.)
  - Security (sanitize, mask, detect injection, etc.)
  - HTTP utilities (status codes, MIME types, headers, cookies)
  - File type detection (extensions, magic bytes, categories)
  - Cryptography helpers (JWT, HMAC, base64, hashing patterns)
  - Data transformation (normalize, pivot, aggregate, window)
  - Regex utilities (pattern building, extraction, replacement)
  - UUID utilities (validation, parsing, version detection)
  - Geolocation (haversine distance, bearing, coordinates)
  - Caching utilities (TTL, keys, eviction, ETag, hit rate)
  - Rate limiting (token bucket, sliding window, backoff)
  - Email utilities (validation, parsing, masking, mailto)
  - Configuration (env parsing, feature flags, DSN parsing)
  - Pagination (offset/limit, cursor, page calculations)
  - Slug utilities (URL slugs, base62/36 IDs, checksum)
  - Money utilities (currency formatting, tax, interest)
  - Phone utilities (parsing, formatting, validation)
  - Markdown utilities (formatting, parsing, TOC generation)
  - SQL building (query construction, escaping, DDL)
  - SQL types (type mapping, validation, casting)
  - Query helpers (analysis, manipulation, pagination)
  - Migration helpers (schema changes, versioning)
  - Transaction helpers (isolation, locking, retries)
  - Data integrity (validation, constraints, checksums)
  - NoSQL helpers (MongoDB, Redis, DynamoDB patterns)
  - ORM patterns (model mapping, relationships, scopes)
  - Connection pool (sizing, health, metrics)
  - Batch operations (bulk insert, parallel processing)
  - Audit logging (change tracking, compliance)
  - API patterns (REST endpoints, versioning, HATEOAS)
  - Auth patterns (JWT, OAuth, sessions, API keys)
  - Webhook patterns (signatures, retries, delivery)
  - Request validation (fields, formats, constraints)
  - Response formatting (pagination, errors, JSONAPI)
  - Error handling (categorization, retry, circuit breaker)
  - Middleware patterns (logging, tracing, security)
  - Job scheduling (cron, queues, retries, workers)
  - State machines (transitions, sagas, workflows)
  - Event sourcing (events, snapshots, projections)
  - Queue patterns (routing, acknowledgments, DLQ)

STEP 7: RUNTIME EXECUTION - Complete the Loop
--------------------------------------------------

Executing the FULL pipeline:
  Intent -> Compose -> Execute -> Result

A) Direct Block Execution (Known-Good Blocks):
----------------------------------------
  Block 'is_empty': SUCCESS -> {'result': False}

Direct Execution: 1 blocks executed successfully

B) Block Verification (Verified-Only Mode):
----------------------------------------
Verifying 4552 blocks...
  Verified: 2740 blocks
  Failed: 1812 blocks
  Success Rate: 60.2%

Semantic Composer now using ONLY 2740 verified blocks

Tier Classification: 2060 Tier-A, 680 Tier-B

Production Mode: Using ONLY 2060 Tier-A blocks (deterministic)

Verification Gate Stats: 2740 admitted, 1812 rejected

C) Semantic Graph Execution (Tier-A Only - Production Mode):
----------------------------------------
Test Inputs: {'text': 'Hello World', 's': 'Hello World', 'string': 'Hello World', 'value': 'Hello World', 'n': 42, 'number': 42}

Execution Result:
  Status: PARTIAL_SUCCESS
  Duration: 307.48ms
  Nodes Executed: 9
  Nodes Succeeded: 8

Execution Trace:
  ✓ parse_query_string (1.00ms)
  ✓ is_ip_in_range (1.00ms)
  ✗ is_worker_idle (302.47ms)
      Error: TypeError: unsupported operand type(s) for -: 'str...
  ✓ should_retry_webhook (1.01ms)
  ✓ to_pascalcase (0.00ms)
  ✓ to_string (1.00ms)

Final Outputs:
  result: ['Hello World']


D) Golden Validation Suite - Known-Working Blocks:
----------------------------------------

============================================================
GOLDEN VALIDATION SUITE - Known-Working Blocks
============================================================

Blocks Tested: 10
Blocks Succeeded: 9
Blocks Failed: 1

Execution Traces:
----------------------------------------
  reverse_string: SUCCESS
    Expected: 'dlrow olleh' -> Got: 'dlrow olleh'
  is_empty: SUCCESS
    Expected: False -> Got: False
  to_uppercase: SUCCESS
    Expected: 'HELLO' -> Got: 'HELLO'
  to_lowercase: SUCCESS
    Expected: 'hello' -> Got: 'hello'
  word_count: SUCCESS
    Expected: 3 -> Got: 3
  is_not_none: SUCCESS
    Expected: True -> Got: True
  to_integer: SUCCESS
    Expected: 42 -> Got: 42
  is_positive: FAILED
    Error: Output mismatch: expected True, got {'valid': True, 'error':
  is_even: SUCCESS
    Expected: True -> Got: True
  capitalize_first: SUCCESS
    Expected: 'Hello' -> Got: 'Hello'


Pipeline Execution: String Normalization
----------------------------------------
  to_lowercase:   Hello World Test   ->   hello world test
  word_count:   hello world test   -> 3
  Final Result: 3


E) Production Reference Workflows:
----------------------------------------

============================================================
PRODUCTION REFERENCE WORKFLOWS
============================================================

Verified Blocks Available: 2499
Workflows Executable: 5/5

Workflow Execution Results:
----------------------------------------
  [PASS] text_normalization: 3/3 steps (1.50ms)
  [PASS] string_analysis: 3/3 steps (1.06ms)
  [PASS] data_extraction: 3/3 steps (0.21ms)
  [PASS] input_validation: 3/3 steps (0.17ms)
  [PASS] text_transform_chain: 3/3 steps (0.18ms)

Overall: ALL PASSED

======================================================================
NEUROP BLOCK FORGE v1.0.0 - PACKAGING READY
======================================================================

PACKAGING VALIDATION:
  Golden Validation Suite: 9/10 FAIL
  Production Reference Workflows: 5/5 PASS
  Tier-A Production Blocks: 2060
  Tier-B Blocks (not used in production): 680

PRODUCTION CLAIMS:
  - Reference workflows execute deterministically (5/5)
  - Golden validation blocks return expected outputs (9/10)
  - Tier-A blocks are pure, deterministic functions
  - Tier-B blocks require explicit opt-in

CONTRACT VERSION: v1.0.0
  - Block.logic stores ORIGINAL source code
  - TrustScore includes execution_count, success_count, success_rate
  - Interface.inputs aligns with function parameters

STATUS: NEEDS FIXES

C:\Users\Lourens\Desktop\NeuropForge>